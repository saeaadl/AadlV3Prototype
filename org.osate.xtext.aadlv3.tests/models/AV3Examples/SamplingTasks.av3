 package SamplingTasks
   import Sampling::*;

   thread interface  Init_Samples is
     OrigSet: requires read access Sample_Set;
     SampleSet: requires write access Sample_Set;
   end ;

   thread interface  Collect_Samples is
     Input_Sample: in port Sample;
     SampleSet: requires write access Sample_Set;
   end ;

   thread interface Distribute_Samples is
     SampleSet: requires read access Sample_Set;
     UpdatedSamples : out port Sample;
   end ;

   process interface Sample_Manager is
     Input_Sample: in port Sample;
     External_Samples: requires read access Sample_Set;
     Result_Sample: out port Sample;
   end ;

   process Sample_Manager.Slow_Update is
     Samples: data Sample_Set { rw: provides readwrite access Sample_Set};
     Init_Samples : thread Init_Samples;
     // the required access is resolved to a subcomponent declaration
     Collect_Samples: thread Collect_Samples;
     Distribute: thread Distribute_Samples;
     ISSSConn: connection Init_Samples.SampleSet -> Samples.rw ;
     ISOSConn: mapping External_Samples => Init_Samples.OrigSet; 
     CSSSConn: connection Collect_Samples.SampleSet -> Samples.rw;
     CSISConn: mapping Input_Sample => Collect_Samples.Input_Sample;
     DSSConn: connection Distribute.SampleSet -> Samples.rw ;
     DUSConn: mapping Result_Sample => Distribute.UpdatedSamples ;
   end ;

 end ;
